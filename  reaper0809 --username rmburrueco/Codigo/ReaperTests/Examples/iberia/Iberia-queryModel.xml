<?xml version="1.0" ?>
<query formUrl="iberia">
	<javaScript url="reaper-javascript.js" />
	<javaScript url="Examples/iberia/iberia-javascript-utils.js" />
	<assignments>
		<dependant>
			<group>
				<simple fieldId="departureCountry">
					<value>Portugal</value>
				</simple>
				<simple fieldId="departureCity">
					<value>Funchal</value>
				</simple>
			</group>
			<group>
				<simple fieldId="departureCountry">
					<value>Spain</value>
				</simple>
				<simple fieldId="departureCity">
					<value>Seville</value>
					<value>Malaga</value>
					<value>Jerez</value>
				</simple>
			</group>
		</dependant>

		<dependant>
			<group>
				<simple fieldId="arrivalCity">
					<value>Barcelona</value>
					<value>Tenerife</value>
					<value>La Coru√±a</value>
				</simple>
				<simple fieldId="numberOfPassengers">
					<value>2</value>
				</simple>
			</group>
			<group>
				<simple fieldId="arrivalCity">
					<value>London</value>
					<value>Rome</value>
					<value>Los Angeles</value>
				</simple>
				<simple fieldId="numberOfPassengers">
					<value>1</value>
				</simple>
			</group>
		</dependant>

		<dependant>
			<group>
				<simple fieldId="onlyDeparture">
					<value>false</value>
				</simple>
				
				<simple fieldId="departureMonth">
					<value javascriptExpression="true">getMonthLabel(pushDepartureDate(addDays(getToday(),10)).getMonth())</value>
					<value javascriptExpression="true">getMonthLabel(pushDepartureDate(addDays(getToday(),20)).getMonth())</value>
					<value javascriptExpression="true">getMonthLabel(pushDepartureDate(addDays(getToday(),30)).getMonth())</value>
				</simple>
				<simple fieldId="departureDay">
					<value javascriptExpression="true">getDepartureDay()</value>
				</simple>
				
				<simple fieldId="returnMonth">
					<value javascriptExpression="true">getMonthLabel(pushReturnDate(addDays(getToday(),50)).getMonth())</value>
					<value javascriptExpression="true">getMonthLabel(pushReturnDate(addDays(getToday(),65)).getMonth())</value>
					<value javascriptExpression="true">getMonthLabel(pushReturnDate(addDays(getToday(),80)).getMonth())</value>
				</simple>
				<simple fieldId="returnDay">
					<value javascriptExpression="true">getReturnDay()</value>
				</simple>
			</group>
			<group>
				<simple fieldId="onlyDeparture">
					<value>true</value>
				</simple>
				<simple fieldId="departureMonth">
					<value javascriptExpression="true">getMonthLabel(pushDepartureDate(addDays(getToday(),40)).getMonth())</value>
				</simple>
				<simple fieldId="departureDay">
					<value javascriptExpression="true">getDepartureDay()</value>
				</simple>
			</group>
		</dependant>
		<simple fieldId="ClassCategory">
			<value javascriptExpression="true">getOptionTextByValue(currentField,'R')</value>
			<value javascriptExpression="true">getOptionTextByValue(currentField,'E')</value>
		</simple>
	</assignments>

	<events>
		<event name="scriptException">showScriptExceptionMessage()</event>
		<event name="reapingProcessBegin">avoidSpanishLanguage()</event>
		<event name="reapingProcessBegin">avoidSpanishLanguage()</event>
		<event name="fieldAssignmentFinished">waitOnCountryChanged(currentField,currentValue)</event>
	</events>
</query>
